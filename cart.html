<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cart - ShopEasy</title>
</head>
<body style="margin:0; font-family:'Segoe UI', sans-serif; background-color:#f8f9fa;">

  <!-- Navbar -->
  <div style="background-color:#333; padding:15px 20px; display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap;">
    <div style="color:white; font-size:24px; font-weight:bold;">üõí ShopEasy</div>
    <div style="display:flex; align-items:center; gap:15px; flex-wrap:wrap;">
      <form action="product.html" method="GET" style="display:flex; align-items:center;">
        <input 
          type="text" 
          name="q" 
          placeholder="Search products..." 
          style="padding:6px 10px; border:none; border-radius:5px 0 0 5px; outline:none;"
          required
        >
        <button 
          type="submit" 
          style="padding:6px 15px; border:none; background:#28a745; color:white; border-radius:0 5px 5px 0; cursor:pointer;"
        >
          Search
        </button>
      </form>
      <a href="index.html" style="color:white; text-decoration:none; margin:0 10px;">Home</a>
      <a href="login.html" style="color:white; text-decoration:none; margin:0 10px;">Login</a>
      <a href="login.html" style="color:white; text-decoration:none; margin:0 10px;">Register</a>
      <a href="product.html" style="color:white; text-decoration:none; margin:0 10px;">Products</a>
      <a href="contact.html" style="color:white; text-decoration:none; margin:0 10px;">Contact</a>
      <a href="cart.html" style="color:white; text-decoration:none; margin:0 10px;">Cart</a>
    </div>
  </div>

  <!-- Cart Section -->
  <div style="max-width:800px; margin:30px auto; background:white; padding:20px; border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,0.1);">
    <h2 style="margin-bottom:20px; color:#333;">üõí Your Shopping Cart</h2>
    <div id="cart-items"></div>
    <div id="total-price" style="text-align:right; font-size:20px; font-weight:bold; margin-top:20px;"></div>

    <!-- Buy Button (will show via JS if cart has items) -->
    <div id="buy-button-container" style="text-align:right; margin-top:20px;"></div>
  </div>

  <!-- Footer -->
  <footer style="text-align:center; padding:20px 0; background-color:#333; color:white; margin-top:40px;">
    &copy; 2025 ShopEasy. All rights reserved.
  </footer>

  <script>
    const cartItemsContainer = document.getElementById('cart-items');
    const totalPriceContainer = document.getElementById('total-price');
    const buyButtonContainer = document.getElementById('buy-button-container');

    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let total = 0;

    if (cart.length === 0) {
      cartItemsContainer.innerHTML = "<p style='color:#777;'>Your cart is empty.</p>";
    } else {
      cart.forEach(item => {
        let cleanPrice = item.price.replace(/[‚Çπ,]/g, '').trim();
        let priceNumber = parseFloat(cleanPrice);
        total += priceNumber;

        const itemDiv = document.createElement('div');
        itemDiv.style = "display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #ddd; padding:10px 0;";

        itemDiv.innerHTML = `
          <div>
            <h4 style="margin:0; font-size:18px; color:#0f1111;">${item.name}</h4>
            <p style="margin:5px 0; color:#b12704; font-weight:bold;">${item.price}</p>
          </div>
          <button style="padding:5px 10px; background:#dc3545; color:white; border:none; border-radius:5px; cursor:pointer;"
            onclick="removeItem('${item.name}')">Remove</button>
        `;
        cartItemsContainer.appendChild(itemDiv);
      });

      totalPriceContainer.innerText = `Total: ‚Çπ ${total.toLocaleString('en-IN')}`;

      // Show Buy button
      buyButtonContainer.innerHTML = `
        <button onclick="buyNow()" style="padding:10px 20px; font-size:16px; background:#ff9900; color:white; border:none; border-radius:5px; cursor:pointer;">
          üõçÔ∏è Buy Now
        </button>
      `;
    }

    function removeItem(name) {
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      let index = cart.findIndex(item => item.name === name);
      if (index !== -1) {
        cart.splice(index, 1);
        localStorage.setItem('cart', JSON.stringify(cart));
        location.reload();
      }
    }

    function buyNow() {
      window.location.href = "buy.html";
    }
  </script>
</body>
</html>
